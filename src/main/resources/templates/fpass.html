<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Forgot Password</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/styles.css" rel="stylesheet">
  </head>
  <body id="signin-page">
    <div class="bg-image d-flex justify-content-center align-items-center" style="background-image: url('../images/lpu_bg.png'); background-size: cover; background-position: center; height: 92vh;">
        <div class="container">
            <div class="row min-vh-100 align-items-center justify-content-center">
                <div id="signin-container" class="col-sm-10 col-md-8 col-lg-5 bg-white rounded-5 p-5 shadow">
                    <form action="/fpass" method="post">
                        <h1 class="h3 mb-4">Forgot Password?</h1>
                    
                        <div class="mb-4">
                            <label for="email" class="form-text mt-2 mb-2">Please enter your email</label>
                            <input type="email" class="form-control shadow" id="email" name="email" placeholder="Email address" required autofocus>
                        </div>
                    
                        <button type="submit" id="resetButton" class="res-btn btn-lg w-100 rounded-pill">Send Reset Link</button>
                    
                        <!-- This will show the success message from the controller -->
                        <div class="mt-3 text-success">
                            <p th:text="${message}"></p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
     </div>

     <footer class="footer pl-3">
        <p>Copyright IntelliSched. All rights reserved.</p>
     </footer>

     <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.min.js"></script>

     <script>
      const form = document.querySelector("form");
      const button = document.getElementById("resetButton");

      form.addEventListener("submit", function (e) {
        e.preventDefault();

        let countdown = 30;
        button.disabled = true;
        button.classList.add("countdown-active");
        button.innerText = `Resend in ${countdown}s`;

        const interval = setInterval(() => {
          countdown--;
          button.innerText = `Resend in ${countdown}s`;

          if (countdown <= 0) {
            clearInterval(interval);
            button.disabled = false;
            button.classList.remove("countdown-active");
            button.innerText = "Send Reset Link";
          }
        }, 1000);
      });
    </script>
    
  </body>
</html>